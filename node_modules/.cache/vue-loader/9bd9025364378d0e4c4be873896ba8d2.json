{"remainingRequest":"D:\\vue-project\\xdclass_front\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!D:\\vue-project\\xdclass_front\\src\\views\\Pay\\Pay.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue-project\\xdclass_front\\src\\views\\Pay\\Pay.vue","mtime":1609679936405},{"path":"D:\\vue-project\\xdclass_front\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-project\\xdclass_front\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vue-project\\xdclass_front\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue-project\\xdclass_front\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZpbmREZXRhaWxCeUlkQXBpLCBzZXRPcmRlckFwaSB9IGZyb20gIkAvYXBpL2FwaS5qcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZpZGVvaW5mbzoge30KICAgICAgICB9OwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAvL+iOt+WPluinhumikeivpuaDhQogICAgICAgIGFzeW5jIGdldERldGFpbCh2aWQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZpbmREZXRhaWxCeUlkQXBpKHZpZCk7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRhdGEuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb2luZm8gPSByZXN1bHQuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgLy/kuIvljZUKICAgICAgICBhc3luYyBwYXkoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXRPcmRlckFwaSgKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiwKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZS5xdWVyeS52aWRlb19pZAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRhdGEuY29kZSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9hc3QgPSB0aGlzLiRjcmVhdGVUb2FzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR4dDogIui0reS5sOaIkOWKnyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjb3JyZWN0IiwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogMjAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgb25UaW1lb3V0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogIm9yZGVyIn0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdG9hc3Quc2hvdygpOwogICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvYXN0ID0gdGhpcy4kY3JlYXRlVG9hc3QoewogICAgICAgICAgICAgICAgICAgICAgICB0eHQ6ICLotK3kubDlpLHotKUiLAogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiAyMDAwLAogICAgICAgICAgICAgICAgICAgICAgICBvblRpbWVvdXQ6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAib3JkZXIifSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0b2FzdC5zaG93KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICB0aGlzLmdldERldGFpbCh0aGlzLiRyb3V0ZS5xdWVyeS52aWRlb19pZCk7CiAgICB9Cn07Cg=="},{"version":3,"sources":["Pay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pay.vue","sourceRoot":"src/views/Pay","sourcesContent":["<template>\r\n    <div>\r\n        <!--视频信息-->\r\n        <div class=\"info\">\r\n            <p class=\"info_title\">商品信息</p>\r\n            <div class=\"box\">\r\n                <div class=\"imgdiv\">\r\n                    <img alt=\"课程照片\" :src=\"videoinfo.cover_img\" />\r\n                </div>\r\n                <div class=\"textdiv\">\r\n                    <p class=\"c_title\">{{videoinfo.title}}</p>\r\n                    <p class=\"price\">￥:&nbsp;&nbsp; {{(videoinfo.price / 100).toFixed(2)}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!--顶部支付-->\r\n        <div class=\"footer\">\r\n            <p class=\"money\">实付:&nbsp;&nbsp; {{(videoinfo.price / 100).toFixed(2)}}</p>\r\n            <p class=\"submit\" @click=\"pay\">立刻支付</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { findDetailByIdApi, setOrderApi } from \"@/api/api.js\";\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                videoinfo: {}\r\n            };\r\n        },\r\n        methods: {\r\n            //获取视频详情\r\n            async getDetail(vid) {\r\n                try {\r\n                    const result = await findDetailByIdApi(vid);\r\n                    if (result.data.code == 0) {\r\n                        this.videoinfo = result.data.data;\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            },\r\n\r\n            //下单\r\n            async pay() {\r\n                try {\r\n                    const result = await setOrderApi(\r\n                        this.$store.state.token,\r\n                        this.$route.query.video_id\r\n                    );\r\n\r\n                    if (result.data.code == 0) {\r\n                        const toast = this.$createToast({\r\n                            txt: \"购买成功\",\r\n                            type: \"correct\",\r\n                            time: 2000,\r\n                            onTimeout: () => {\r\n                                this.$router.push({path: \"order\"});\r\n                            }\r\n                        });\r\n                        toast.show();\r\n                    }else {\r\n                        const toast = this.$createToast({\r\n                            txt: \"购买失败\",\r\n                            type: \"error\",\r\n                            time: 2000,\r\n                            onTimeout: () => {\r\n                                this.$router.push({path: \"order\"});\r\n                            }\r\n                        });\r\n                        toast.show();\r\n                    }\r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            }\r\n        },\r\n        mounted() {\r\n            this.getDetail(this.$route.query.video_id);\r\n        }\r\n    };\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    // 视频标题\r\n    .info_title {\r\n        padding: 10px 20px;\r\n        background-color: #fff;\r\n        border-bottom: 1px solid #d9dde1;\r\n    }\r\n\r\n    .box {\r\n        background-color: #fff;\r\n        box-sizing: border-box;\r\n        padding: 20px;\r\n        display: flex;\r\n        margin-bottom: 15px;\r\n    .imgdiv {\r\n        width: 105px;\r\n        height: 59px;\r\n        flex-shrink: 0;\r\n    img {\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    }\r\n\r\n    .textdiv {\r\n        margin-left: 20px;\r\n        height: 59px;\r\n        flex-grow: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: space-between;\r\n    .price {\r\n        flex-shrink: 0;\r\n    }\r\n    }\r\n    }\r\n    //底部\r\n      .footer {\r\n          position: fixed;\r\n          bottom: 0;\r\n          width: 100%;\r\n          height: 50px;\r\n          background-color: #fff;\r\n          display: flex;\r\n          justify-content: space-between;\r\n          box-shadow: 0 -2px 4px 0 rgba(0, 0, 0, 0.1);\r\n          font-size: 16px;\r\n    .money {\r\n        height: 50px;\r\n        line-height: 50px;\r\n        flex: 2;\r\n        text-align: center;\r\n        background-color: #fff;\r\n    }\r\n    .submit {\r\n        height: 50px;\r\n        line-height: 50px;\r\n        flex: 1;\r\n        text-align: center;\r\n        background-color: #ff2d50;\r\n        color: #fff;\r\n    }\r\n    }\r\n</style>\r\n"]}]}